// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Item {
  id            Int      @id @default(autoincrement())
  tornId        Int      @unique
  uid           BigInt   @unique
  name          String
  type          String
  subType       String?
  quantity      Int
  circulation   Int
  marketPrice   Int
  damage        Float?
  accuracy      Float?
  armor         Float?
  quality       Float?
  bonuses       Json?
  rarity        String?
  image         String?
  myDescription String?
  myPrice       Int?
  likes         Int      @default(0)
  dislikes      Int      @default(0)
  heatUps       Int      @default(0)
  isSold        Boolean  @default(false)
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  reactions     UserReaction[]

  @@map("items")
}

model UserReaction {
  id        Int      @id @default(autoincrement())
  itemId    Int
  userId    String   // localStorage user ID
  liked     Boolean?
  disliked  Boolean?
  heatedUp  Boolean  @default(false)
  createdAt DateTime @default(now())
  item      Item     @relation(fields: [itemId], references: [id], onDelete: Cascade)

  @@unique([itemId, userId])
  @@map("user_reactions")
}
